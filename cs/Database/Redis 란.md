# Redis 란

### Redis 란?

- Key, Value 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈 소스 기반의 비관계형 데이터 베이스 관리 시스템 (DBMS)입니다.
- 데이터베이스, 캐시, 메세지 브로커로 사용되며 인메모리 데이터 구조를 가진 저장소입니다.

### 특징 및 장점

- `인메모리 데이터베이스` : Redis는 데이터를 메모리에 저장하므로 빠른 응답 속도를 제공합니다.
- `다양한 데이터 타입` : Redis는 문자열, 리스트, 해시, 집합, 정렬 집합과 같은 다양한 데이터 구조를 지원합니다. 이를 통해 다양한 데이터 처리 요구사항을 처리하기 수월합니다.
- `영속성` : Redis는 디스크에 데이터를 주기적으로 저장하여 데이터의 지속성을 제공합니다. 이를 통해 시스템 장애 시에도 데이터 손실을 방지할 수 있습니다.
- `Pub-Sub 메시징` : Redis는 Publish-Subscribe 메커니즘을 지원하여 메시지 브로커로 사용할 수 있습니다. 이를 통해 이벤트 기반 시스템을 구축하거나 메시지 전달에 활용할 수 있습니다.
- `트랜잭션 / 싱글 스레드` : Redis는 멀티 명령어를 원자적으로 실행하는 트랜잭션을 지원하는데, 이를 통해 여러 작업을 원자적으로 처리할 수 있습니다. 이러한 트랜잭션 유지가 가능한 이유는 Redis가 싱글 스레드 기반으로 동작하기 때문인데 따라서 Redis를 잘 이해하고 사용할 경우 사이드 이펙트가 거의 없는 매우 안정적인 서비스를 구축할 수 있습니다.
- `클러스터링` : Redis는 데이터 샤딩과 레플리케이션을 통해 고가용성 및 확장성을 제공하는 클러스터를 구성할 수 있습니다.
- `LRU 캐시 및 만료 시간` : Redis는 데이터를 자동으로 관리하기 위해 LRU (Least Recently Used) 알고리즘과 만료 시간(Time-to-Live)을 지원합니다.
- `트러블슈팅` : 많은 사용자들이 존재하여 비슷한 문제 해결 사례가 많으며, 커뮤니티 도움 받기 수월합니다.

### 활용 사례

1. JWT 리프레시 토큰 저장 및 관리

   사용자 인증 시 발급된 JWT의 유효성을 검증하고, 만료 전에 리프레시 토큰을 이용해 새로운 토큰을 발급받는 과정에서, 리프레시 토큰을 안전하게 저장하고 관리하는 용도로 Redis를 사용할 수 있습니다. 이를 통해 토큰 갱신 과정의 보안성과 성능을 향상시킬 수 있습니다.

2. 이메일 인증 코드 저장

   사용자가 회원가입이나 비밀번호 재설정 등을 요청했을 때, 이메일로 발송된 인증 코드를 Redis에 임시로 저장합니다. 사용자가 코드를 입력하면 Redis에 저장된 코드와 비교하여 인증 과정을 진행할 수 있으며, 이메일 인증 코드는 자동으로 만료되도록 설정할 수 있습니다.

3. 중복 로그인 방지

   사용자가 로그인할 때마다 해당 사용자의 세션 정보를 Redis에 저장하고, 로그인 상태를 관리합니다. 이후 같은 사용자가 다른 장치나 위치에서 로그인 시도를 할 경우, 이미 로그인한 세션이 있는지 Redis를 통해 확인하고, 정책에 따라 중복 로그인을 허용하지 않거나 기존 세션을 종료시킬 수 있습니다.

4. 댓글의 좋아요 기능 구현

   Redis의 카운터 기능을 사용하여 소셜 미디어 포스트나 댓글에 대한 '좋아요' 수를 실시간으로 관리할 수 있습니다. 각 포스트나 댓글에 대해 하나의 키를 할당하고, 좋아요가 클릭될 때마다 해당 키의 값을 증가시킵니다.

5. 출석 관리

   사용자의 출석 정보를 관리하기 위해 Redis의 세트(Set) 또는 해시(Hash) 자료 구조를 사용할 수 있습니다. 사용자별로 출석 날짜를 저장하고, 연속 출석일 수나 월별 출석 통계 등을 쉽게 계산할 수 있습니다.

6. 최근 검색 목록

   사용자별 최근 검색어를 저장하고 관리하기 위해 Redis의 리스트(List) 또는 정렬된 세트(Sorted Set)를 사용할 수 있습니다. 이를 통해 사용자가 애플리케이션 내에서 수행한 최근 검색어를 실시간으로 추적하고, 검색어 목록을 쉽게 업데이트하거나 삭제할 수 있습니다.

7. 피드 및 타임라인

   소셜 네트워크에서 사용자의 피드나 타임라인을 관리하는 데 Redis를 사용할 수 있습니다. 정렬된 세트를 사용하여 사용자별로 시간 순서대로 게시글이나 이벤트를 저장하고, 이를 바탕으로 사용자 맞춤형 피드를 생성할 수 있습니다.

8. 방문자 수 카운팅

   웹사이트 방문자 수 카운팅이나 유니크 사용자 수를 측정하는 데 Redis의 하이퍼로그로그(HyperLogLog)를 사용할 수 있습니다. 하이퍼로그로그는 매우 적은 메모리를 사용하여 대량의 유니크한 요소를 카운팅할 수 있는 기능을 제공합니다.
